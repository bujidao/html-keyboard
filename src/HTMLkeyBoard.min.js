function BuKeyboard(){var a=null;this.settings={el:"input",left:"50px",top:"50px",width:"500px",height:"200px",funType:"letter",open:true,background:"none",isUppercase:false,fontSize:"16px"}}BuKeyboard.prototype.json={};BuKeyboard.prototype.init=function(a){extend(this.settings,a);if(this.settings.open){this._open()}else{this._close()}};BuKeyboard.prototype._open=function(){this._createDiv()};BuKeyboard.prototype._close=function(){this._removeDiv()};BuKeyboard.prototype._setAddValue=function(a,b){if(a){a.value+=b}};BuKeyboard.prototype._setReduceValue=function(a){var b=a&&a.value||false;if(b){var c=b.substr(0,b.length-1);a.value=c}};BuKeyboard.prototype._setEmptyValue=function(a){a.value=""};BuKeyboard.prototype._removeDiv=function(){var a=document.getElementsByTagName("body")[0];a.removeChild(document.getElementById("__b_u_k_e_y_b_o_a_r_d_div_id"))};BuKeyboard.prototype._createDiv=function(){var c=document.createElement("div");c.id="__b_u_k_e_y_b_o_a_r_d_div_id";c.innerHTML=this._createButton();c.className="bu-keyboard__wrapper";c.style.position="absolute";c.style.left=this.settings.left;c.style.top=this.settings.top;c.style.width=this.settings.width;c.style.height=this.settings.height;c.style.background=this.settings.background;c.style.fontSize=this.settings.fontSize;this._bindEvent(c);var f=$$tag("body")[0];f.appendChild(c);var b=$$tag("li",c);for(var d=0;d<b.length;d++){b[d].style.width=(c.offsetWidth-80)/10+"px";b[d].style.height=(c.offsetHeight-20)/5+"px";b[d].style.lineHeight=(c.offsetHeight-20)/5+"px"}var j=b[0].offsetWidth+4;var h=$$class("k-line2-head",c)[0];h.style.marginLeft=j/2+2+"px";var k=$$class("k-switch-uppercase",c)[0];k.style.width=j*1.5-4+"px";var l=$$class("k-switch-del",c)[0];l.style.width=j*1.5-4+"px";var g=$$class("k-switch-function",c)[0];g.style.width=b[0].offsetWidth*2.5+6+"px";var e=$$class("k-space",c)[0];e.style.width=b[0].offsetWidth*3+8+"px";var a=$$class("k-enter",c)[0];a.style.width=b[0].offsetWidth*2.5+6+"px"};BuKeyboard.prototype._setSwitchLetterChar=function(){var a=this.settings.funType;if(a==="letter"){this.settings.funType="char"}else{if(a==="char"){this.settings.funType="letter"}}};BuKeyboard.prototype._setSwitchUppercase=function(){if(this.settings.isUppercase){document.getElementsByClassName("k-switch-uppercase")[0].className="k-switch-uppercase color-dark";for(var a=0;a<document.getElementsByClassName("k-letter").length;a++){document.getElementsByClassName("k-letter")[a].innerHTML=document.getElementsByClassName("k-letter")[a].innerHTML.toLowerCase()}}else{document.getElementsByClassName("k-switch-uppercase")[0].className="k-switch-uppercase color-dark active";for(var a=0;a<document.getElementsByClassName("k-letter").length;a++){document.getElementsByClassName("k-letter")[a].innerHTML=document.getElementsByClassName("k-letter")[a].innerHTML.toUpperCase()}}this.settings.isUppercase=!this.settings.isUppercase};BuKeyboard.prototype._clickEvent=function(f){var c=f||window.event;var g=c.element||c.target;var d=g.textContent||g.innerText;var a=document.getElementById(this.settings.el);var b=g.tagName.toLocaleLowerCase();switch(b){case"div":this._close();break;case"li":if(d==="↑"){this._setSwitchUppercase()}else{if(d==="空格"){this._setAddValue(a," ")}else{if(d==="清空"){this._setEmptyValue(a)}else{if(d==="._@/#"||d==="ABC"){this._close();this._setSwitchLetterChar();this._createDiv()}else{if(d!=="删除"){this._setAddValue(a,d)}else{this._setReduceValue(a)}}}}}break;default:break}};BuKeyboard.prototype._bindEvent=function(a){if(this.settings.mobile){a.ontouchstart=this._clickEvent.bind(this)}else{a.onclick=this._clickEvent.bind(this)}return a};BuKeyboard.prototype._createButton=function(){var d="<style>.bu-keyboard__wrapper{width:340px;height:175px;background:#eee;text-align:center}ul{list-style:none;margin:0}.keyboard-container{display:inline-block;height:100%;background:#eee;padding:10px 20px}.keyboard-container li{float:left;display:inline-block;width:30px;height:35px;line-height:35px;background:#fff;text-align:center;margin:2px;color:#4a4a4a;border-radius:4px;box-shadow:0 0 2px 1px #ccc;cursor:pointer;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none}.keyboard-container li:hover{background:#eee}.keyboard-container .k-line2-head{margin-left:18px}.keyboard-container .k-switch-uppercase,.keyboard-container .k-switch-del{width:46px}.keyboard-container .k-switch-uppercase.active{color:deepskyblue}.keyboard-container .k-switch-function,.keyboard-container .k-enter{width:81px}.keyboard-container .k-space{width:98px}.keyboard-container .color-dark{background:#ddd}</style>";var a='<div class="keyboard-close" style="display: none;background: '+this.settings.background+'">收起</div>'+'<ul class="keyboard-container" style="background: '+this.settings.background+'">\n'+'        <li class="k-num">1</li>\n'+'        <li class="k-num">2</li>\n'+'        <li class="k-num">3</li>\n'+'        <li class="k-num">4</li>\n'+'        <li class="k-num">5</li>\n'+'        <li class="k-num">6</li>\n'+'        <li class="k-num">7</li>\n'+'        <li class="k-num">8</li>\n'+'        <li class="k-num">9</li>\n'+'        <li class="k-num">0</li>\n'+"\n"+'        <li class="k-letter">q</li>\n'+'        <li class="k-letter">w</li>\n'+'        <li class="k-letter">e</li>\n'+'        <li class="k-letter">r</li>\n'+'        <li class="k-letter">t</li>\n'+'        <li class="k-letter">y</li>\n'+'        <li class="k-letter">u</li>\n'+'        <li class="k-letter">i</li>\n'+'        <li class="k-letter">o</li>\n'+'        <li class="k-letter">p</li>\n'+"\n"+'        <li class="k-letter k-line2-head">a</li>\n'+'        <li class="k-letter">s</li>\n'+'        <li class="k-letter">d</li>\n'+'        <li class="k-letter">f</li>\n'+'        <li class="k-letter">g</li>\n'+'        <li class="k-letter">h</li>\n'+'        <li class="k-letter">j</li>\n'+'        <li class="k-letter">k</li>\n'+'        <li class="k-letter">l</li>\n'+"\n"+'        <li class="k-switch-uppercase color-dark">&uarr;</li>\n'+'        <li class="k-letter">z</li>\n'+'        <li class="k-letter">x</li>\n'+'        <li class="k-letter">c</li>\n'+'        <li class="k-letter">v</li>\n'+'        <li class="k-letter">b</li>\n'+'        <li class="k-letter">n</li>\n'+'        <li class="k-letter">m</li>\n'+'        <li class="k-switch-del color-dark">删除</li>\n'+"\n"+'        <li class="k-switch-function color-dark">._@/#</li>\n'+'        <li class="k-dot">.</li>\n'+'        <li class="k-space">空格</li>\n'+'        <li class="k-at">@</li>\n'+'        <li class="k-enter color-dark">清空</li>\n'+"    </ul>";
  var c='<div class="keyboard-close" style="display: none;background: '+this.settings.background+'">收起</div>'+'<ul class="keyboard-container" style="background: '+this.settings.background+'">\n'+'        <li class="k-num">^</li>\n'+'        <li class="k-num">\\</li>\n'+'        <li class="k-num">|</li>\n'+'        <li class="k-num"><</li>\n'+'        <li class="k-num">></li>\n'+'        <li class="k-num">&cent;</li>\n'+'        <li class="k-num">&pound;</li>\n'+'        <li class="k-num">&yen;</li>\n'+'        <li class="k-num"></li>\n'+'        <li class="k-num"></li>\n'+"\n"+'        <li class="k-char">[</li>\n'+'        <li class="k-char">]</li>\n'+'        <li class="k-char">{</li>\n'+'        <li class="k-char">}</li>\n'+'        <li class="k-char">#</li>\n'+'        <li class="k-char">%</li>\n'+'        <li class="k-char">+</li>\n'+'        <li class="k-char">=</li>\n'+'        <li class="k-char">&sim;</li>\n'+'        <li class="k-char">_</li>\n'+"\n"+'        <li class="k-char k-line2-head">-</li>\n'+'        <li class="k-char">/</li>\n'+'        <li class="k-char">:</li>\n'+'        <li class="k-char">;</li>\n'+'        <li class="k-char">(</li>\n'+'        <li class="k-char">)</li>\n'+'        <li class="k-char">$</li>\n'+'        <li class="k-char">&</li>\n'+'        <li class="k-char">"</li>\n'+"\n"+'        <li class="k-switch-uppercase color-dark"></li>\n'+'        <li class="k-char"></li>\n'+'        <li class="k-char">?</li>\n'+'        <li class="k-char">!</li>\n'+'        <li class="k-char">*</li>\n'+'        <li class="k-char">@</li>\n'+'        <li class="k-char">,</li>\n'+'        <li class="k-char">\'</li>\n'+'        <li class="k-switch-del color-dark">删除</li>\n'+"\n"+'        <li class="k-switch-function color-dark">ABC</li>\n'+'        <li class="k-dot">.</li>\n'+'        <li class="k-space">空格</li>\n'+'        <li class="k-at">@</li>\n'+'        <li class="k-enter color-dark">清空</li>\n'+"    </ul>";var b=this.settings.funType;if(b==="letter"){return(d+a)}else{if(b==="char"){return(d+c)}}};function extend(c,b){for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}}function $$class(b,a){if(a){return a.getElementsByClassName(b)}return document.getElementsByClassName(b)}function $$tag(b,a){if(a){return a.getElementsByTagName(b)}return document.getElementsByTagName(b)}function viewWidth(){return document.documentElement.clientWidth}function viewHeight(){return document.documentElement.clientHeight};
